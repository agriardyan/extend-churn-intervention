# Minimal Redis configuration for embedded mode
# Optimized for single-container deployment

# Bind to localhost only (security)
bind 127.0.0.1

# Port
port 6379

# Disable protected mode (we're localhost only)
protected-mode no

# No password required (localhost only)
# requirepass <password>

# Logging
loglevel notice
logfile ""

# Persistence: Disabled (cache-only mode)
# For AGS deployment, we don't need persistence since:
# 1. State is temporary (30-day TTL)
# 2. Container restarts are acceptable
# 3. Avoids permission issues in containerized environments
save ""

# Don't stop writes if background save fails
stop-writes-on-bgsave-error no

# RDB file location (not used but required by Redis)
dir /data/redis
dbfilename dump.rdb

# Memory limits
maxmemory 128mb
maxmemory-policy allkeys-lru

# Disable AOF (not needed for this use case)
appendonly no

# Disable replication
# replica-read-only yes

# Performance tuning
tcp-backlog 511
timeout 0
tcp-keepalive 300

# Slow log
slowlog-log-slower-than 10000
slowlog-max-len 128

# Disable dangerous commands
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command CONFIG ""
